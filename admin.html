<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-dns-prefetch-control" content="on" />
    <meta
      http-equiv="Referrer-Policy"
      content="strict-origin-when-cross-origin"
    />
    <meta
      http-equiv="Permissions-Policy"
      content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), fullscreen=(self)"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self' https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; img-src 'self' https: data: blob:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://firestore.googleapis.com https://firebasestorage.googleapis.com https://*.googleapis.com; frame-ancestors 'self'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests"
    />
    <title>Admin — Fashion Photographer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <script>
      window.tailwind = window.tailwind || {};
      window.tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              bg: "#0f0f10",
              card: "#151517",
              text: "#e9e9ea",
              muted: "#b4b4b6",
              accent: "#e0d0b8",
              accent2: "#b3a08a",
              border: "#2a2a2e",
            },
            borderRadius: {
              xl: "12px",
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <style>
      .admin-wrap {
        padding: 24px 0;
      }
      .admin-card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 18px;
      }
      .admin-grid {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 14px;
      }
      .admin-col-6 {
        grid-column: span 6;
      }
      .admin-col-12 {
        grid-column: 1 / -1;
      }
      .hidden {
        display: none !important;
      }
      .upload-zone {
        border: 2px dashed var(--border);
        border-radius: 12px;
        padding: 24px;
        text-align: center;
        color: var(--muted);
      }
      .upload-zone.drag {
        background: #111114;
      }
      .gallery-admin {
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 10px;
        margin-top: 12px;
      }
      .gallery-item {
        grid-column: span 3;
        background: #101012;
        border: 1px solid var(--border);
        border-radius: 10px;
        overflow: hidden;
        display: grid;
      }
      .gallery-item img {
        width: 100%;
        height: 160px;
        object-fit: cover;
      }
      .gallery-item .meta {
        padding: 8px 10px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }
      .handle {
        cursor: grab;
        color: var(--muted);
      }
      .danger {
        color: #ff7171;
        cursor: pointer;
      }
      .auth-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
      }
      .auth-bar small {
        color: var(--muted);
      }
      @media (max-width: 960px) {
        .admin-col-6 {
          grid-column: 1 / -1;
        }
      }
      @media (max-width: 960px) {
        .gallery-item {
          grid-column: span 4;
        }
      }
      @media (max-width: 720px) {
        .gallery-item {
          grid-column: 1 / -1;
        }
      }
      @media (max-width: 720px) {
        .auth-bar {
          flex-direction: column;
          align-items: stretch;
        }
        .auth-bar .btn {
          width: 100%;
        }
        .form-grid label {
          grid-column: 1 / -1;
        }
        .upload-zone {
          padding: 16px;
        }
      }
    </style>
  </head>
  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="./" class="logo">Alex Morgan</a>
        <button
          class="nav-toggle"
          aria-controls="admin-nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="nav-toggle-bar"></span>
          <span class="nav-toggle-bar"></span>
        </button>
        <nav id="admin-nav" class="nav" aria-label="Admin navigation">
          <ul>
            <li><a href="./">View Site</a></li>
          </ul>
        </nav>
      </div>
    </header>
    <main class="admin-wrap">
      <div class="container">
        <div id="auth-view" class="admin-card admin-col-12">
          <h2>Admin Login</h2>
          <p class="muted">
            Use the email/password you configured in Firebase Authentication.
          </p>
          <form id="login-form" class="form-grid" autocomplete="on">
            <label>
              <span>Email</span>
              <input
                type="email"
                id="email"
                required
                autocomplete="username"
                inputmode="email"
                autocapitalize="none"
                spellcheck="false"
              />
            </label>
            <label>
              <span>Password</span>
              <input
                type="password"
                id="password"
                required
                autocomplete="current-password"
              />
            </label>
            <div class="admin-col-12">
              <button
                class="btn focus:outline-none focus-visible:ring-2 focus-visible:ring-[#b3a08a] shadow-md hover:shadow-lg"
                type="submit"
              >
                Log in
              </button>
              <span
                id="auth-error"
                style="color: #ff7171; margin-left: 10px"
              ></span>
            </div>
            <div class="admin-col-12">
              <a id="forgot-password" href="#" class="muted"
                >Forgot password?</a
              >
            </div>
          </form>
        </div>

        <div id="app-view" class="hidden">
          <div class="auth-bar">
            <small id="user-email"></small>
            <button
              id="logout"
              class="btn btn-small focus:outline-none focus-visible:ring-2 focus-visible:ring-[#b3a08a] shadow-md hover:shadow-lg"
            >
              Log out
            </button>
          </div>
          <div class="admin-grid">
            <section class="admin-card admin-col-6">
              <h3>Upload Images</h3>
              <div
                class="form-grid"
                style="margin-bottom: 12px; align-items: end"
              >
                <label>
                  <span>Default caption (optional)</span>
                  <input
                    type="text"
                    id="default-caption"
                    placeholder="e.g. Spring Lookbook"
                  />
                </label>
                <label>
                  <span>Portfolio Section</span>
                  <select id="default-section">
                    <option value="fashion">Fashion</option>
                    <option value="photo-shoots">Photo Shoots</option>
                    <option value="agency-portfolio">Agency Portfolio Shoots</option>
                  </select>
                </label>
                <label>
                  <span>Category</span>
                  <select id="default-category">
                    <option value="fashion-events">Fashion Events</option>
                    <option value="fashion-photography">Fashion Photography</option>
                    <option value="portraits-headshots">Portraits & Headshots</option>
                    <option value="model-portfolios">Model Portfolios</option>
                    <option value="actor-portfolios">Actor Portfolios</option>
                    <option value="lifestyle">Lifestyle</option>
                    <option value="events">Events</option>
                  </select>
                </label>
              </div>
              <div
                id="dropzone"
                class="upload-zone"
                tabindex="0"
                aria-label="Drop images here or click to upload"
              >
                Drag & drop images here or click to choose
                <input
                  id="file-input"
                  type="file"
                  accept="image/*"
                  multiple
                  style="display: none"
                />
              </div>
              <div
                id="upload-progress"
                style="
                  margin-top: 10px;
                  height: 8px;
                  background: #1b1b1e;
                  border: 1px solid var(--border);
                  border-radius: 8px;
                  overflow: hidden;
                  display: none;
                "
              >
                <div
                  id="upload-bar"
                  style="
                    height: 100%;
                    width: 0;
                    background: linear-gradient(
                      90deg,
                      var(--text),
                      var(--accent-2)
                    );
                  "
                ></div>
              </div>
              <div
                id="upload-status"
                class="muted"
                style="margin-top: 8px"
              ></div>
            </section>
            <section class="admin-card admin-col-6">
              <h3>Gallery Controls</h3>
              <button
                id="refresh"
                class="btn btn-small focus:outline-none focus-visible:ring-2 focus-visible:ring-[#b3a08a] shadow-md hover:shadow-lg"
              >
                Refresh
              </button>
              <button
                id="save-order"
                class="btn btn-small focus:outline-none focus-visible:ring-2 focus-visible:ring-[#b3a08a] shadow-md hover:shadow-lg"
              >
                Save Order
              </button>
              <button
                id="delete-selected"
                class="btn btn-small"
                style="margin-left: 6px"
              >
                Delete Selected
              </button>
              <p class="muted">Drag tiles using the handle to reorder.</p>
            </section>
            <section class="admin-card admin-col-12">
              <h3>Image Metadata & SEO Management</h3>
              <div class="form-grid" style="margin-top: 12px; margin-bottom: 12px">
                <label>
                  <span>Search Images</span>
                  <input
                    type="text"
                    id="metadata-search"
                    placeholder="Search by title, description, keywords..."
                  />
                </label>
                <label>
                  <span>Filter by Category</span>
                  <select id="metadata-filter-category">
                    <option value="all">All Categories</option>
                    <option value="fashion-events">Fashion Events</option>
                    <option value="fashion-photography">Fashion Photography</option>
                    <option value="portraits-headshots">Portraits & Headshots</option>
                    <option value="model-portfolios">Model Portfolios</option>
                    <option value="actor-portfolios">Actor Portfolios</option>
                    <option value="lifestyle">Lifestyle</option>
                    <option value="events">Events</option>
                  </select>
                </label>
              </div>
              <button
                id="bulk-edit-btn"
                class="btn btn-small"
                style="margin-bottom: 12px"
              >
                Bulk Edit Selected
              </button>
            </section>
            <section class="admin-card admin-col-12">
              <h3>Current Gallery</h3>
              <div id="gallery-admin" class="gallery-admin"></div>
            </section>
            <section class="admin-card admin-col-12">
              <h3>User Management</h3>
              <div class="form-grid" style="margin-top: 8px">
                <label>
                  <span>User UID</span>
                  <input
                    id="user-uid"
                    type="text"
                    placeholder="Paste Firebase Auth UID"
                    autocapitalize="none"
                    spellcheck="false"
                  />
                </label>
                <label>
                  <span>Role</span>
                  <select id="user-role">
                    <option value="member">member</option>
                    <option value="admin">admin</option>
                  </select>
                </label>
                <div class="admin-col-12">
                  <button id="save-role" class="btn btn-small" type="button">
                    Save Role
                  </button>
                  <span
                    id="role-status"
                    class="muted"
                    style="margin-left: 10px"
                  ></span>
                </div>
              </div>
              <div style="margin-top: 12px">
                <h4 style="margin-bottom: 6px">Users</h4>
                <div id="users-list" class="muted">No users loaded yet.</div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>

    <!-- Firebase SDKs -->
    <script
      defer
      src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"
    ></script>
    <script
      defer
      src="https://www.gstatic.com/firebasejs/10.14.1/firebase-storage-compat.js"
    ></script>
    <!-- EXIF.js for metadata extraction -->
    <script src="https://cdn.jsdelivr.net/npm/exif-js@2.3.0/exif.js"></script>
    <!-- Your config (copy config.example.js to config.js and fill values) -->
    <script defer src="assets/js/config.js"></script>
    <script defer src="assets/js/metadata.js"></script>
    <script defer src="assets/js/admin.js"></script>
    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© <span id="year-admin"></span> Alex Morgan.</p>
        <ul class="social">
          <li>
            <a href="#" aria-label="Instagram" title="Instagram">
              <svg
                class="icon"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <rect
                  x="3"
                  y="3"
                  width="18"
                  height="18"
                  rx="5"
                  stroke="currentColor"
                  stroke-width="1.5"
                />
                <circle
                  cx="12"
                  cy="12"
                  r="4.25"
                  stroke="currentColor"
                  stroke-width="1.5"
                />
                <circle cx="17.5" cy="6.5" r="1.25" fill="currentColor" />
              </svg>
            </a>
          </li>
          <li>
            <a href="#" aria-label="Behance" title="Behance">
              <svg
                class="icon"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <path
                  d="M4 7.5h4.4c1.7 0 2.6.95 2.6 2.25 0 .95-.52 1.66-1.3 1.95v.05c1 .27 1.7 1.02 1.7 2.2 0 1.6-1.1 2.55-3 2.55H4V7.5Zm3.9 3.6c.85 0 1.3-.42 1.3-1.02 0-.62-.46-.98-1.25-.98H5.8v2h2.1Zm.2 4.2c.93 0 1.45-.42 1.45-1.15 0-.7-.52-1.12-1.5-1.12H5.8v2.27h2.3ZM19.9 11.6h-3.9c.08 1.12.86 1.78 2.02 1.78.8 0 1.4-.2 1.92-.54l.73 1.23c-.68.5-1.58.8-2.77.8-2.4 0-3.9-1.5-3.9-3.7s1.5-3.7 3.6-3.7c2.14 0 3.4 1.5 3.4 3.62 0 .16-.02.32-.06.5Zm-3.6-2.7c-.92 0-1.56.55-1.7 1.5h3.3c-.06-.9-.64-1.5-1.6-1.5ZM14.8 7.5h3.6v1h-3.6v-1Z"
                  fill="currentColor"
                />
              </svg>
            </a>
          </li>
          <li>
            <a href="#" aria-label="Email" title="Email">
              <svg
                class="icon"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                aria-hidden="true"
              >
                <rect
                  x="3"
                  y="5"
                  width="18"
                  height="14"
                  rx="2"
                  stroke="currentColor"
                  stroke-width="1.5"
                />
                <path
                  d="M4 7l8 6 8-6"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </footer>
  </body>
</html>
